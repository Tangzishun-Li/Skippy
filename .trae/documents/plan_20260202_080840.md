# 逃课记录软件修复与改进计划

## 问题修复

### 1. 课程状态切换问题

* **问题**：被标记为有问题的课程无法换成其他标记

* **解决方案**：修改`addLessonClickListeners`函数，允许问题课程通过右键点击或长按切换状态

### 2. 浮窗交互问题

* **问题**：鼠标在"有问题"上面时，一旦移开，浮窗就会消失，导致无法点到加号

* **解决方案**：修改浮窗显示逻辑，当鼠标移到浮窗上时保持显示，只有当鼠标完全离开课程项和浮窗时才隐藏

## 功能改进

### 1. 增加DDL标签

* **需求**：增加一个"DDL"的标签，蓝色，只能放到未来

* **实现**：

  * 在状态列表中添加"DDL"状态

  * 添加蓝色样式

  * 修改状态切换逻辑，只允许对未来课程设置DDL状态

### 2. 状态限制逻辑

* **需求**：只能对过去的课程标记"旷课""有问题""没问题"，未来只能加"DDL"

* **实现**：添加日期判断逻辑，根据课程日期限制可选择的状态

### 3. 美化日历显示

* **需求**：美化日历显示

* **实现**：

  * 改进日历单元格样式

  * 添加更好的课程标记显示

  * 优化日历导航按钮样式

  * 增加日历的视觉层次感

### 4. 课程添加逻辑改进

* **需求**：需要添加课程时确定上课日，而不是周几。在下面设置频率，比如每周，每两周，每个月，每天

* **实现**：

  * 修改课程添加表单，使用日期选择器代替周几选择

  * 添加频率选择下拉菜单（每周、每两周、每个月、每天）

  * 修改课程生成逻辑，根据选择的频率计算课程日期

## 技术实现步骤

1. **修复状态切换问题**：修改点击事件处理逻辑
2. **修复浮窗交互问题**：修改鼠标事件处理
3. **添加DDL状态**：更新状态列表和样式
4. **实现状态限制逻辑**：添加日期判断
5. **美化日历显示**：改进CSS样式
6. **修改课程添加表单**：更新HTML结构和逻辑
7. **测试所有功能**：确保修复和改进正常工作

## 预期结果

* 课程状态可以自由切换，包括有问题的课程

* 浮窗交互流畅，可点击加号按钮

* 新增DDL状态，蓝色显示

* 状态设置根据课程日期有合理限制

* 日历显示美观，信息清晰

* 课程添加更加灵活，支持多种频率设置

