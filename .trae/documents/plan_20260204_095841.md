# 逃课记录软件功能改进计划

## 改进内容

### A. 问题课程交互逻辑改进
- **需求**：在课程列表中，对于"已经上过（有问题）"的课程：
  1. 点击切换标签
  2. 鼠标悬停显示浮窗，显示问题和加号按钮

- **解决方案**：
  - 修改`addLessonClickListeners`函数，区分点击和悬停事件
  - 为问题课程添加悬停事件，显示浮窗
  - 保持点击事件用于状态切换

### B. 可视化显示当前周
- **需求**：在课程列表中，用黑框圈出当前是第几周
- **解决方案**：
  - 计算当前周数
  - 在渲染课程列表时，为当前周添加特殊样式
  - 添加CSS样式，用黑框圈出当前周

### C. 未来课程状态改进
- **需求**：删除"未来课程"状态，改为点击DDL会变蓝，再点回到无标签状态
- **解决方案**：
  - 修改`showStatusMenu`函数，移除"未来课程"选项
  - 更新状态切换逻辑，支持DDL和无标签状态的切换
  - 调整CSS样式，确保状态显示正确

## 技术实现

### A. 交互逻辑改进
- **修改`addLessonClickListeners`函数**：
  - 为问题课程添加悬停事件
  - 保持点击事件用于状态切换

- **修改`showStatusMenu`函数**：
  - 移除"未来课程"选项
  - 添加DDL和无标签状态选项

### B. 当前周显示
- **添加当前周计算**：
  - 实现`getCurrentWeek`函数，计算当前是第几周
  - 在`renderCourses`函数中，为当前周添加特殊样式

- **添加CSS样式**：
  - 添加`.current-week`样式，用黑框圈出

### C. 状态逻辑改进
- **修改`showStatusMenu`函数**：
  - 更新状态选项，移除"未来课程"
  - 添加DDL和无标签状态的切换

- **修改`updateLessonStatus`函数**：
  - 支持无标签状态的设置

## 预期结果

- **交互逻辑**：问题课程悬停显示浮窗，点击切换状态
- **当前周显示**：当前周在课程列表中用黑框圈出
- **状态管理**：移除"未来课程"状态，支持DDL和无标签状态的切换

## 实现步骤

1. **修改交互逻辑**：更新点击和悬停事件处理
2. **实现当前周显示**：添加计算和样式
3. **改进状态逻辑**：移除"未来课程"状态
4. **测试所有功能**：确保改进正常工作